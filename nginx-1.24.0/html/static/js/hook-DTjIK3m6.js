var v=(t,b,i)=>new Promise((f,l)=>{var c=s=>{try{u(i.next(s))}catch(o){l(o)}},h=s=>{try{u(i.throw(s))}catch(o){l(o)}},u=s=>s.done?f(s.value):Promise.resolve(s.value).then(c,h);u((i=i.apply(t,b)).next())});import{ay as m,K as T,r as n,V as B,a7 as K,o as X,i as G,b as J,aV as Q,A as p,ah as Z,bl as x,aa as w,D as ee,aX as ae}from"./index-Zjjfkekr.js";import{u as te,_ as ne}from"./index.vue_vue_type_script_setup_true_lang-BOf3kWLs.js";import{z as se}from"./index.esm-BcMmGP1h.js";import"./index-BmD-sjfu.js";var oe={VITE_PORT:"8848",VITE_HIDE_HOME:"false",VITE_PUBLIC_PATH:"/",VITE_ROUTER_HISTORY:"hash",VITE_CDN:"false",VITE_COMPRESSION:"none",VITE_API_PATH:"localApi",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_PATH:g}=oe,ie=t=>m.request("get",`${g}/api/userManage/list`,{params:t}),re=t=>m.request("post",`${g}/api/userManage/update`,{data:t}),le=t=>m.request("post",`${g}/api/userManage/add`,{data:t}),ce=t=>m.request("post",`${g}/api/userManage/del`,{data:t});function ge(t,b){const i=T({name:"",status:""}),f=n();n();const l=n([]),c=n(!0);n(),n({}),te(),n();const h=n([]),u=n(!0),s=n(0),o=T({total:0,pageSize:10,currentPage:1,background:!0}),y=[{label:"姓名",prop:"name",minWidth:130},{label:"性别",prop:"sex",minWidth:90,cellRenderer:({row:e,props:a})=>G(J("el-tag"),{size:a.size,type:e.sex==="1"?"danger":null,effect:"plain"},{default:()=>[e.sex==="1"?"女":"男"]})},{label:"手机号",prop:"phone",minWidth:130},{label:"职位",prop:"position",minWidth:130},{label:"联系地址",prop:"address",minWidth:130},{label:"创建时间",minWidth:90,prop:"createTime",formatter:({createTime:e})=>Q(e).format("YYYY-MM-DD HH:mm:ss")},{label:"操作",fixed:"right",width:180,slot:"operation"}],V=B(()=>["!h-[20px]","reset-margin","!text-gray-500","dark:!text-white","dark:hover:!text-primary"]),C=T({newPwd:""}),O=n();function A(e){}function H(e){ce({id:e.id}).then(()=>{p(`您删除了姓名为${e.name}的这条数据`,{type:"success"}),r()})}function $(e){o.currentPage=1,o.pageSize=e,r()}function U(e){o.currentPage=e,r()}function z(e){s.value=e.length,t.value.setAdaptive()}function L(){s.value=0,t.value.getTableRef().clearSelection()}function W(){const e=t.value.getTableRef().getSelectionRows();p(`已删除社区人员编号为 ${Z(e,"id")} 的数据`,{type:"success"}),t.value.getTableRef().clearSelection()}function r(){return v(this,null,function*(){c.value=!0;const e=Object.assign(x(o),x(i)),{data:a}=yield ie(e);l.value=a.data,o.total=a.total,setTimeout(()=>{c.value=!1},500)})}const k=e=>{e&&(e.resetFields(),r())};function Y(e="新增",a){var S,I,R,M,D,E;w({title:`${e}社区人员`,props:{formInline:{id:(S=a==null?void 0:a.id)!=null?S:"",name:(I=a==null?void 0:a.name)!=null?I:"",phone:(R=a==null?void 0:a.phone)!=null?R:"",sex:(M=a==null?void 0:a.sex)!=null?M:"",position:(D=a==null?void 0:a.position)!=null?D:"",address:(E=a==null?void 0:a.address)!=null?E:""}},width:"46%",draggable:!0,fullscreenIcon:!0,closeOnClickModal:!1,contentRenderer:()=>ee(ne,{ref:f}),beforeSure:(j,{options:q})=>{const F=f.value.getRef(),_=q.props.formInline;function P(){p(`您${e}了姓名为${_.name}的这条数据`,{type:"success"}),j(),r()}F.validate(N=>{N&&(e==="新增"?le(_).then(d=>{d.errno===0?P():p(d.message,{type:"error"})}):re(_).then(d=>{d.errno===0?P():p(d.message,{type:"error"})}))})}})}return n(),K(C,({newPwd:e})=>O.value=ae(e)?-1:se(e).score),X(()=>v(this,null,function*(){r()})),{form:i,loading:c,columns:y,dataList:l,treeData:h,treeLoading:u,selectedNum:s,pagination:o,buttonClass:V,onSearch:r,resetForm:k,onbatchDel:W,openDialog:Y,handleUpdate:A,handleDelete:H,handleSizeChange:$,onSelectionCancel:L,handleCurrentChange:U,handleSelectionChange:z}}export{ge as useObj};
